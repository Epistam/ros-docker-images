FROM lmaths/ros:indigo-desktop-full-intel
MAINTAINER Jack Liu jackliu.lab@gmail.com

# using upgrade (not recommend)
RUN apt-get update && apt-get upgrade -y

# install eclipse IDE with eclipse-cdt
RUN apt-get install  -y gdb
RUN apt-get install  -y eclipse eclipse-cdt \
    && rm -rf /var/lib/apt/lists/*

# add "ros" user
RUN adduser --gecos "ROS User" --disabled-password ros
RUN usermod -a -G dialout ros

RUN echo "ros ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers.d/99_aptget
RUN chmod 0440 /etc/sudoers.d/99_aptget && chown root:root /etc/sudoers.d/99_aptget

# "ros" user
USER ros

# set environment
RUN echo "export QT_X11_NO_MITSHM=1" >> /home/ros/.bashrc
RUN echo "export HOME=/home/ros" >> /home/ros/.bashrc
RUN echo "source /opt/ros/indigo/setup.bash" >> /home/ros/.bashrc
